package calc;
import java.math.BigDecimal;

public class origin {
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
	int[][] DVData;             //定义一个2维数组
	DVData=new int[32][32];       //为它分配空间大小
	//例一
	//String longdata="0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000201000100000000000000000000000000000000000000000000000000000000010201000000000000000000000000000000000000000000000000000000000007040100000000000000000000000000000000000000000000000000000000010D0202010000000000000000000000000000000000000000000000000000000010040201000000000000000000000000000000000000000000000000000000001909000300000000000000000000000000000000000000000000000000000001070400010000000000000000000000000000000000000000000000000000000001050201000000000000000000000000000000000000000000000000000000020201010100010000000000000000000000000000000000000000000000000000000003000000020000000000000000000000000000000000000000000000000000000000020100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
	//例二
	//String longdata="0x00000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000010001010000000000010000000000000000000000000000000000000000000000010000010000000000000000000000000000000000000000000000000000000001010302000100000000000000000000000000000000000000000000000000000101020501020001000000000000000000000000000000000000000000000001000100030000000000000000000000000000000000000000000000000000000000020005000000000000000000000000000000000000000000000000000000000103060403010000000000000000000000000000000000000000000000000001030207020001000000000000000000000000000000000000000000000000000300030201040100010000000000000000000000000000000000000000000000020002060101000000000000000000000000000000000000000000000000000001010403030102000000000000010000000000000000000000000000000000000201040203000300010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
	//例三
	//String longdata="0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000003040000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000030100000000000000000000000000000000000000000000000000000000000008030000000000000000000000000000000000000000000000000000000000000D090000000000000000000000000000000000000000000000000000000000000B0700000000000000000000000000000000000000000000000000000000000021250200000000000000000000000000000000000000000000000000000000001E250302000000000000000000000000000000000000000000000000000000002349110000000000000000000000000000000000000000000000000000000000223C1B04000000000000000000000000000000000000000000000000000000001C5C3206000000000000000000000000000000000000000000000000000000002593810F000000000000000000000000000000000000000000000000000000000B6EAD2D05010000000000000000000000000000000000000000000000000000002774331401000000000000000000000000000000000000000000000000000000001C2922040000000000000000000000000000000000000000000000000000000000161B040100000000000000000000000000000000000000000000000000000000000B0105030100000000000000000000000000000000000000000000000000000000000000040701000000000000000000000000000000000000000000000000000000000000010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 ";
	//例四
	//String longdata="0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000100000000000001000000000000000000000000000000000000000000000001000000000000000000000000000000000001000000000000000000000000000200000000000000010000000000000000000000000000000000000000000000010000000001000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000E0000000000000000000000000000000000000000000000000000000000000015070101000000000000000000000000000000000000000000000000000000000E100000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000011E030000000000000000000000000000000000000000000000000000000000010E0E0000000000000000000000000000000000000000000000000000000000010272080000000000000000000000000000000000000000000000000000000000021E53020000000000000000000000000000000000000000000100000000000000012E17000000000000000000000000000000000000000000000000000000000001023505000000000000000000000000000000000000000000000000000000000003102102010000000000000000000000000000000000000000000000000000000001123A1509000000000000000000000000000000000000000000000000000000000000020D0500000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
	//例五
	//String longdata="0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000300000100000000000000000000000000000000000000000000000000000000030100000000000000000000000000000000000000000000000000000000000003010000000000000000000000000000000000000000000000000000000000000B01010000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000013020000000000000000000000000000000000000000000000000000000000002E140200000000000000000000000000000000000000000000000000000000001633000000000000000000000000000000000000000000000000000000000000095104020200000000000000000000000000000000000000000000000000000000391D030100000000000000000000000000000000000000000000000000000002164F020000000000000000000000000000000000000000000000000000000004134C59050000000000000000000000000000000000000000000000000000000104447C1702000000000000000000000000000000000000000000000000000000000792A3020000000000000000000000000000000000000000000000000000000002066122010000000000000000000000000000000000000000000000000000000000072F050000000000000000000000000000000000000000000000000000000000000103010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
	//例六
	//String longdata="0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000401000000000000000000000000000000000000000000000000000000000000090000000000000000000000000000000000000000000000000000000000000006010000000000000000000000000000000000000000000000000000000000000B010000000000000000000000000000000000000000000000000000000000001001000000000000000000000000000000000000000000000000000000000000270B000000000000000000000000000000000000000000000000000000000000360C0000000000000000000000000000000000000000000000000000000000003515000000000000000000000000000000000000000000000000000000000000172E03000000000000000000000000000000000000000000000000000000000006280400000000000000000000000000000000000000000000000000000000000D2A220000000000000000000000000000000000000000000000000000000000020120020000000000000000000000000000000000000000000000000000000000000202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

	String longdata="0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000100000000000000000000000000000000000000000000020301000000000000010000000000000000000000000000000000000000000002080000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000202000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
	
	int t=2;    //字符子串位置	
	int vdin;   //定义录入数组的变量
	int []NK=new int[32];   //存储各档粒子数（按直径分） 
	double Pi=3.1415926;
	double []NNK=new double[32];  //存储格挡粒子数浓度（按直径分）
	double []DD={0.0625,0.1875,0.3125,0.4375,0.5625,0.6875,
			0.8125,0.9375,1.0625,1.1875,1.375,1.625,1.875,2.125,2.375,2.750,
			3.250,3.750,4.250,4.750,5.500,6.500,7.500,8.500,9.500,11.000,13.000,
			15.000,17.000,19.000,21.500,24.500};     //定义直径分档
	double []DV={0.050,0.150,0.250,0.350,0.450,0.550,0.650,
			0.750,0.850,0.950,1.100,1.300,1.500,1.700,1.900,2.200,2.600,3.000,
			3.400,3.800,4.400,5.200,6.000,6.800,7.600,8.800,10.400,12.000,13.600,
			15.200,17.600,20.800};   //定义速度分档
	int N0=0;double NN0=0; //初始化总粒子数和总粒子数浓度
	double R=0;   //初始化 本次降水量
	double D1=0,D2=0,D3=0,D1temp=0,D2temp=0,D3temp=0;//初始化平均直径、均方根直径、均立方根直径及其在循环中的局部变量
	double LQ=0,Z=0,E=0,LQtemp=0,Ztemp=0,Etemp=0; //初始化液态水含量、雷达反射率因子、本次雨滴动能及其在循环中的局部变量
	double Dmax=0; //初始化谱宽
	for(int v=0;v<=31;v++){               //速度循环
		 
		for(int d=0;d<=31;d++){          //直径循环
			String vd=longdata.substring(t,t+2);    //取子串，结果为二位十六进制数
			t=t+2;
			vdin=Integer.parseInt(vd, 16); 
			DVData[v][d]=vdin;
		}
	}
	
	for(int m=0;m<32;m++){    //列循环
		NK[m]=0;NNK[m]=0;
		for(int n=0;n<32;n++){   //行循环
		NK[m]=NK[m]+DVData[n][m];            //各档粒子数（按直径分）
		NNK[m]=NNK[m]+DVData[n][m]/(54*Math.pow(10, -4)*DV[n]*60);            //各档粒子浓度（按直径分）
		}		
		if (m>=20)  //凡是大于5mm的粒子都删去
		{NK[m]=0;
		NNK[m]=0;}
		N0=N0+NK[m];          //计算总粒子数
		NN0=NN0+NNK[m];        //计算总粒子数浓度
		R=R+((NK[m]*Math.pow(DD[m], 3)*Pi*Math.pow(10, -6))/(6*54*Math.pow(10, -4)));  //计算降水量
		D1temp=D1temp+NK[m]*DD[m];                     
		D2temp=D2temp+NK[m]*Math.pow(DD[m],2);
		D3temp=D3temp+NK[m]*Math.pow(DD[m],3);
		LQtemp=LQtemp+(NNK[m]*Math.pow(DD[m], 3));
		Ztemp=Ztemp+(NNK[m]*Math.pow(DD[m],6));
		Etemp=Etemp+(NK[m]*Math.pow(DV[m],2)*Math.pow(DD[m],3));
	}
	double I=R*60;    //计算雨强  
	D1=D1temp/N0;
	D2=Math.pow(D2temp/N0, 0.5);
	D3=Math.pow(D3temp/N0, 1.0/3);
	LQ=(LQtemp*Pi*Math.pow(10,-3))/6;        //计算液态含水量
	Z=10*Math.log10(Ztemp);                                //计算雷达反射率因子
	E=((Etemp)*Pi*Math.pow(10,-6))/12;                  //计算本次雨滴动能
	
	for(int i=31;i>=0;i--){                              //确定谱宽
		boolean flag = false;  //初始化布尔数为假
		for(int j=31;j>=0;j--){
		    if(DVData[j][i]!=0&DD[i]<=5)  {	     //遍历二维数组，找到第一个不为0的值，并跳出循环，注意谱宽不能大于5mm	    	
		    Dmax=DD[i];
		    flag = true;break;}
		    	}              
		   
		  if(flag == true)
              break;
	      }
	
	BigDecimal NN0_bg = new BigDecimal(NN0);
	NN0 = NN0_bg.setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue();    //总粒子数浓度保留2位小数
	BigDecimal R_bg = new BigDecimal(R);
	R = R_bg.setScale(5, BigDecimal.ROUND_HALF_UP).doubleValue();    //降水量保留5位小数
	BigDecimal I_bg = new BigDecimal(I);
	I = I_bg.setScale(3, BigDecimal.ROUND_HALF_UP).doubleValue();    //雨强保留3位小数
	BigDecimal D1_bg = new BigDecimal(D1);
	D1 = D1_bg.setScale(4, BigDecimal.ROUND_HALF_UP).doubleValue();    //平均直径保留4位小数
	BigDecimal D2_bg = new BigDecimal(D2);
	D2 = D2_bg.setScale(4, BigDecimal.ROUND_HALF_UP).doubleValue();    //均方根直径保留4位小数
	BigDecimal D3_bg = new BigDecimal(D3);
	D3 = D3_bg.setScale(4, BigDecimal.ROUND_HALF_UP).doubleValue();    //均立方根直径保留4位小数
	BigDecimal LQ_bg = new BigDecimal(LQ);
	LQ = LQ_bg.setScale(4, BigDecimal.ROUND_HALF_UP).doubleValue();    //液态含水量保留4位小数
	BigDecimal Z_bg = new BigDecimal(Z);
	Z = Z_bg.setScale(4, BigDecimal.ROUND_HALF_UP).doubleValue();    //雷达反射率因子保留4位小数
	BigDecimal E_bg = new BigDecimal(E);
	E = E_bg.setScale(10, BigDecimal.ROUND_HALF_UP).doubleValue();    //雨滴总动能保留10位小数
	
	//System.out.println("原始数据转为二维数组");  
	//for(int i=0;i<DVData.length;i++){                   //看看转换后的二维数组
	//	for(int j=0;j<DVData[i].length;j++){
	//	    System.out.print("["+DVData[i][j]+"]");    
	//	   }
	//	   System.out.println();
	//	  }
	System.out.println("总粒子数为");
	System.out.println(N0);
	System.out.println("总粒子数浓度为");
	System.out.println(NN0);
	System.out.println("谱宽为");  
	System.out.println(Dmax);
	System.out.println("本次降水量为");
	System.out.println(R);
	System.out.println("雨强为");
	System.out.println(I);
	System.out.println("平均直径为");
	System.out.println(D1);
	System.out.println("均方根直径为");
	System.out.println(D2);
	System.out.println("均立方根直径为");
	System.out.println(D3);
	System.out.println("液态含水量为");
	System.out.println(LQ);
	System.out.println("雷达反射率因子为");
	System.out.println(Z);
	System.out.println("雨滴总动能为");
	System.out.println(E);
 }

	
	
	
}


